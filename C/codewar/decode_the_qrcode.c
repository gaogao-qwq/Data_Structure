#include <stdio.h>
#include <stdlib.h>

static int value[21][21] = {{1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1},
                            {1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1},
                            {1, 0, 1, 1, 1, 0, 1, 0, 0, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1},
                            {1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 1, 1, 0, 0, 1, 0, 1, 1, 1, 0, 1},
                            {1, 0, 1, 1, 1, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1},
                            {1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 1},
                            {1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1},
                            {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0},
                            {0, 0, 1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1},
                            {1, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 1, 1, 0, 1, 1, 1, 1},
                            {1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1},
                            {1, 1, 1, 1, 1, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 0},
                            {1, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0},
                            {0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0, 1, 0, 0, 0, 1, 1, 0},
                            {1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1},
                            {1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 1, 1},
                            {1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 1},
                            {1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0, 1, 0, 1, 0, 1, 0},
                            {1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 1, 0, 1},
                            {1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 1, 0, 1, 1, 1, 1, 0, 1, 0},
                            {1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0, 0, 1, 1, 0, 1, 1, 1, 1}};

// clang-format off
static int data[8][4][2] = {{{14, 20}, {13, 20}, {12, 20}, {11, 20}},
                            {{10, 20}, { 9, 20}, { 9, 18}, {10, 18}},
                            {{11, 18}, {12, 18}, {13, 18}, {14, 18}},
                            {{15, 18}, {16, 18}, {17, 18}, {18, 18}},
                            {{19, 18}, {20, 18}, {20, 16}, {19, 16}},
                            {{18, 16}, {17, 16}, {16, 16}, {15, 16}},
                            {{14, 16}, {13, 16}, {12, 16}, {11, 16}},
                            {{10, 16}, { 9, 16}, { 9, 14}, {10, 14}}};
// clang-format on

int mask(int x, int y, int qrcode[21][21]) {
    if ((x + y) % 2) {
        return qrcode[x][y];
    }
    return !qrcode[x][y];
}

const char *scanner(int qrcode[21][21]) {
    int len, i, j, ch;
    char *res = calloc(9, sizeof(char));

    for (i = 18, len = 0; i > 14; --i) {
        len = (len + mask(i, 20, qrcode)) * 2;
        len = (len + mask(i, 19, qrcode)) * 2;
    }
    len /= 2;

    for (i = 0; i < len; ++i) {
		ch = 0;
        for (j = 0; j < 4; ++j) {
            ch = (ch + mask(data[i][j][0], data[i][j][1],     qrcode)) * 2;
            ch = (ch + mask(data[i][j][0], data[i][j][1] - 1, qrcode)) * 2;
        }
		ch /= 2;
		res[i] = ch;
    }
    return res;
}

int main(void) {
    printf("%s", scanner(value));
    return 0;
}
